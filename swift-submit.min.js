!function($){$.fn.swiftSubmit=function(options,validationRules,onBeforeSend,onSuccess,onError,onComplete){var $Form=$(this),settings=$.extend({format:"auto",form:"",action:"",method:"POST",redirect:!1,redirectURL:""},options);let $ActionUrl=$Form.attr("action");var $DefaultButtonText="",$currentMessage;function ResetForm(HtmlForm){HtmlForm.trigger("reset"),$("select.resetIt",HtmlForm).each((function(){var defaultValue=$(this).attr("data-default-value"),defaultText=$(this).attr("data-default-text");$(this).empty().append('<option value="'+defaultValue+'">'+defaultText+"</option>")})),$("select.emptyIt",HtmlForm).empty(),$(HtmlForm).find("input:visible:first").focus()}function IsMobileNumberValid(mobileNumber){if(""==(mobileNumber=mobileNumber.trim()))return!1;if(isNaN(mobileNumber))return!1;if(mobileNumber.length<10)return!1;var operatorCodes=["013","014","015","016","017","018","019"];if(mobileNumber.startsWith("1")){if(10!=mobileNumber.length)return!1;var firstTwoDigits,operatorCode="0"+mobileNumber.substr(0,2);return!!operatorCodes.includes(operatorCode)}if(mobileNumber.startsWith("01")){if(11!=mobileNumber.length)return!1;var operatorCode=mobileNumber.substr(0,3);return!!operatorCodes.includes(operatorCode)}if(mobileNumber.startsWith("8801")){if(13!=mobileNumber.length)return!1;var operatorCode=mobileNumber.substr(2,3);return!!operatorCodes.includes(operatorCode)}return!1}function ValidatePhoto(fileInputControl,maximumKB,requiredHeight,requiredWidth){var fileName=fileInputControl.val(),title=fileInputControl.attr("data-title");if(""==fileName)return showError($currentMessage="<strong>"+title+"</strong> required.",fileInputControl),!1;var fileInput=fileInputControl[0],selectedFile=fileInput.files[0],regex=/^([a-zA-Z0-9\s_\\.\-:])+(.jpeg|.jpg)$/,arrFileName=fileName.split("\\"),fileNameee=arrFileName[arrFileName.length-1];if(!regex.test(fileName.toLowerCase()))return showError($currentMessage="<strong>"+title+"</strong> invalid. Please select a .jpg file.",fileInputControl),!1;for(var fileSizeInByte=selectedFile.size,Units=new Array("Bytes","KB","MB","GB"),unitPosition=0;fileSizeInByte>900;)fileSizeInByte/=1024,unitPosition++;var finalSize=Math.round(100*fileSizeInByte)/100,finalUnitName=Units[unitPosition],fileSizeAndUnit=finalSize+" "+finalUnitName;if("KB"!=finalUnitName)return showError($currentMessage="<strong>"+title+"</strong> size is too large. Maximum size is 100 kilobytes.",fileInputControl),!1;if(finalSize>maximumKB)return showError($currentMessage="<strong>"+title+"</strong> size is too large. Maximum size is 100 kilobytes.",fileInputControl),!1;if("undefined"!=typeof FileReader){var reader=new FileReader;reader.readAsDataURL(fileInput.files[0]),reader.onload=function(e){var image=new Image;image.src=e.target.result,image.onload=function(){return this.width!=requiredWidth?(showError($currentMessage="<strong>"+title+"</strong> width invalid. Width must be "+requiredWidth+" pixel.",fileInputControl),!1):this.height!=requiredHeight?(showError($currentMessage="<strong>"+title+"</strong> height invalid. Height must be "+requiredHeight+" pixel.",fileInputControl),!1):void 0}}}return!0}var $SubmitButton=$Form.find(".form-submit-button"),$ButtonType=$SubmitButton.attr("type");function showError($message,$element){$.sweetModal({content:$message,icon:$.sweetModal.ICON_WARNING}),$element.addClass("error"),$("html,body").animate({scrollTop:$element.offset().top-50},1e3),$element.focus()}function beforeSendFunction(){onBeforeSend?onBeforeSend():"button"==$ButtonType?($DefaultButtonText=$SubmitButton.html(),$SubmitButton.html("Working…"),$SubmitButton.attr("disabled","disabled")):($DefaultButtonText=$SubmitButton.val(),$SubmitButton.val("Working…"),$SubmitButton.attr("disabled","disabled"))}function successFunction(response){if(console.log(response),onSuccess)$SubmitButton.removeAttr("disabled"),$SubmitButton.val($DefaultButtonText),onSuccess(response);else{if(void 0===response.issuccess)return $SubmitButton.removeAttr("disabled"),$SubmitButton.val($DefaultButtonText),alert("Problem in getting response from server. Please try again."),!1;response.issuccess?(void 0!==response.message&&($.sweetModal({content:response.message,icon:$.sweetModal.ICON_SUCCESS}),"button"==$ButtonType?$SubmitButton.html($DefaultButtonText):$SubmitButton.val($DefaultButtonText)),void 0!==response.redirecturl&&(window.location=response.redirecturl)):($.sweetModal({content:response.message,icon:$.sweetModal.ICON_WARNING}),$SubmitButton.removeAttr("disabled"),"button"==$ButtonType?$SubmitButton.html("Try again"):$SubmitButton.val("Try again"))}}function errorFunction(xhr,status,error){$("#submit-spinner").hide(),onError?onError(xhr,status,error):HandleError(xhr,status,error)}function completeFunction(){onComplete?onComplete():$SubmitButton.removeAttr("disabled")}function SubmitFormAsAuto(formData){$.ajax({data:formData,cache:!1,contentType:!1,processData:!1,type:settings.method,url:$ActionUrl,beforeSend:beforeSendFunction,success:successFunction,error:errorFunction,complete:completeFunction})}function SubmitFormAsJson(){var $JsonData=ConvertHtmlFormToJson($Form);$.ajax({data:JSON.stringify($JsonData),type:settings.method,url:$ActionUrl,contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:beforeSendFunction,success:successFunction,error:errorFunction,complete:completeFunction})}function ConvertHtmlFormToJson(selector){for(var ary=$(selector).serializeArray(),obj={},a=0;a<ary.length;a++)obj[ary[a].name]=ary[a].value;return obj}function HandleError(jqXHR,textStatus,errorThrown){var message="Failed to execute.\n";switch(textStatus){case"timeout":message+="Operation timeout. Pleasy try again.",message+="\n "+jqXHR.statusText+" ("+jqXHR.status+")";break;case"error":message+="An error ouccured.",message+="\n "+jqXHR.statusText+" ("+jqXHR.status+")";break;case"abort":message+="Request aborted.",message+="\n "+jqXHR.statusText+" ("+jqXHR.status+")";break;case"parsererror":message+="Parser error.",message+="\n "+jqXHR.statusText+" ("+jqXHR.status+")";break;default:message+="An unexpected error occured.",message+="\n "+jqXHR.statusText+" ("+jqXHR.status+")"}$.sweetModal({content:message,icon:$.sweetModal.ICON_WARNING}),console.log(jqXHR.status),console.log(jqXHR.statusText),console.log(textStatus),console.log(errorThrown)}$Form.on("submit",(function(event){event.preventDefault(),event.stopPropagation();var formErrorMessage="",hasError=!1;if($Form.find(".validate").each((function(i,obj){var $this=$(this),$currentElement=$this,title=$this.attr("data-title");void 0===title&&(title=$this.parent(".field").find("label").html());var dataType=$this.attr("data-datatype"),value=$this.val();if(!$this.parent(".field").hasClass("hidden")){var closestToggleVisibleWrapper=$this.closest(".toggleVisibleWrapper");if(void 0===closestToggleVisibleWrapper||!closestToggleVisibleWrapper.hasClass("hidden")){if(""!=$.trim(String(value))){let isInvalid;if(isDoubleByte($.trim(String(value))))return hasError=!0,console.log($this.attr("name")),showError($currentMessage="<strong>"+title+"</strong> must be in english",$currentElement),!1}var isRequired=$this.attr("data-required"),dataType;if(!1!==isRequired&&void 0!==isRequired){var checked;if($this.is(":checkbox"))if(!$this.is(":checked"))return hasError=!0,$currentMessage="<strong>"+title+"</strong> required.",console.log($this.attr("name")),showError($currentMessage,$currentElement),!1;if("required"==isRequired&&""==value)return hasError=!0,console.log($this.attr("name")),showError($currentMessage="<strong>"+title+"</strong> required.",$currentElement),!1}if(!1!==(dataType=$this.attr("data-datatype"))&&void 0!==dataType){var length=$.trim(value).length;if("required"==isRequired||"optional"==isRequired&&length>0)switch(dataType){case"letters":var re;if(!(re=/^[a-z\s]+$/i).test(value))return hasError=!0,message=title+" invalid.",showError(message,$element),!1;break;case"email":var re;if(!(re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(value))return hasError=!0,showError($currentMessage=title+" invalid.",$currentElement),!1;break;case"mobile":if(!IsMobileNumberValid(value))return hasError=!0,showError($currentMessage="<strong>"+title+"</strong> invalid.",$currentElement),!1;break;case"integer":case"float":case"double":case"decimal":if(isNaN(value))return hasError=!0,showError($currentMessage="<strong>"+title+"</strong> must be a valid number.",$currentElement),!1;break;case"date":var dateValue;if(!moment(value,"DD-MM-YYYY").isValid())return hasError=!0,showError($currentMessage="<strong>"+title+"</strong> invalid.",$currentElement),!1}}var minLength=$this.attr("data-minlen");if(!1!==minLength&&void 0!==minLength){var length=$.trim(value).length;if(minLength=parseInt(minLength),("required"==isRequired||"optional"==isRequired&&length>0)&&length<minLength)return hasError=!0,console.log($this.attr("name")),showError($currentMessage="<strong>"+title+"</strong> must be equal or greater than "+minLength+" characters.",$currentElement),!1}var maxLength=$this.attr("data-maxlen");if(!1!==maxLength&&void 0!==maxLength){var length=$.trim(value).length;if(maxLength=parseInt(maxLength),("required"==isRequired||"optional"==isRequired&&length>0)&&length>maxLength)return hasError=!0,console.log($this.attr("name")),showError($currentMessage="<strong>"+title+"</strong> must be equal or less than "+maxLength+" characters.",$currentElement),!1}var exactLength=$this.attr("data-exactlen");if(!1!==exactLength&&void 0!==exactLength){var length=$.trim(value).length;if(exactLength=parseInt(exactLength),("required"==isRequired||"optional"==isRequired&&length>0)&&length!==exactLength)return hasError=!0,console.log($this.attr("name")),showError($currentMessage="<strong>"+title+"</strong> must have "+exactLength+" characters.",$currentElement),!1}var minValue=$this.attr("data-minval");if(!1!==minValue&&void 0!==minValue){if(!1!==dataType&&void 0===dataType)return hasError=!0,showError($currentMessage="Datatype undefined for <strong>"+title+"</strong>.",$currentElement),!1;var length=$.trim(value).length;if("required"==isRequired||"optional"==isRequired&&length>0){if(("integer"==dataType||"float"==dataType||"double"==dataType||"decimal"==dataType)&&isNaN(value))return hasError=!0,showError($currentMessage="<strong>"+title+"</strong> must be a valid number.",$currentElement),!1;switch(dataType){case"integer":value=parseInt(value),minValue=parseInt(minValue);break;case"float":case"double":case"decimal":value=parseFloat(value),minValue=parseFloat(minValue);break;case"date":var value;if(!(value=moment(value,"DD-MM-YYYY")).isValid())return hasError=!0,showError($currentMessage="<strong>"+title+"</strong> invalid.",$currentElement),!1;minValue=moment(minValue,"DD-MM-YYYY");break;default:return hasError=!0,showError($currentMessage="Datatype undefined for <strong>"+title+"</strong>.",$currentElement),!1}if(value<minValue)return hasError=!0,showError($currentMessage="<strong>"+title+"</strong> must be equal or greater than "+minValue+".",$currentElement),!1}}var maxValue=$this.attr("data-maxval");if(!1!==maxValue&&void 0!==maxValue){if(!1!==dataType&&void 0===dataType)return hasError=!0,showError($currentMessage="Datatype undefined for "+title+".",$currentElement),!1;var length=$.trim(value).length;if("required"==isRequired||"optional"==isRequired&&length>0){if(("integer"==dataType||"float"==dataType||"double"==dataType||"decimal"==dataType)&&isNaN(value))return hasError=!0,showError($currentMessage="<strong>"+title+"</strong> must be a valid number.",$currentElement),!1;switch(dataType){case"integer":value=parseInt(value),maxValue=parseInt(maxValue);break;case"float":case"double":case"decimal":value=parseFloat(value),maxValue=parseFloat(maxValue);break;case"date":var value;if(!(value=moment(value,"DD-MM-YYYY")).isValid())return hasError=!0,showError($currentMessage=title+" invalid.",$currentElement),!1;maxValue=moment(maxValue,"DD-MM-YYYY");break;default:return hasError=!0,showError($currentMessage="Datatype undefined for <strong>"+title+"</strong>.",$currentElement),!1}if(value>maxValue)return hasError=!0,showError($currentMessage="<strong>"+title+"</strong> must be equal or less than "+maxValue+".",$currentElement),!1}}var exactValue=$this.attr("data-exactval");if(!1!==exactValue&&void 0!==exactValue){if(!1!==dataType&&void 0===dataType)return hasError=!0,showError($currentMessage="Datatype undefined for "+title+".",$currentElement),!1;var length=$.trim(value).length;if("required"==isRequired||"optional"==isRequired&&length>0){if(("integer"==dataType||"float"==dataType||"double"==dataType||"decimal"==dataType)&&isNaN(value))return hasError=!0,showError($currentMessage="<strong>"+title+"</strong> must be a valid number.",$currentElement),!1;switch(dataType){case"integer":value=parseInt(value),exactValue=parseInt(exactValue);break;case"float":case"double":case"decimal":value=parseFloat(value),exactValue=parseFloat(exactValue);break;case"date":var value;if(!(value=moment(value,"DD-MM-YYYY")).isValid())return hasError=!0,showError($currentMessage="<strong>"+title+"</strong> invalid.",$currentElement),!1;exactValue=moment(exactValue,"DD-MM-YYYY");break;default:return hasError=!0,showError($currentMessage="Datatype undefined for <strong>"+title+"</strong>.",$currentElement),!1}if(value!=exactValue)return hasError=!0,showError($currentMessage="<strong>"+title+"</strong> must be equal to "+exactValue+".",$currentElement),!1}}if($this.hasClass("photo")){var maxSizeInKb=$this.attr("data-maxkb"),requiredHeight=$this.attr("data-height"),requiredWidth=$this.attr("data-width");if(!ValidatePhoto($this,parseInt(maxSizeInKb),parseInt(requiredHeight),parseInt(requiredWidth)))return hasError=!0,!1}if($this.hasClass("signature")){var maxSizeInKb=$this.attr("data-maxkb"),requiredHeight=$this.attr("data-height"),requiredWidth=$this.attr("data-width");if(!ValidatePhoto($this,parseInt(maxSizeInKb),parseInt(requiredHeight),parseInt(requiredWidth)))return hasError=!0,!1}$currentElement.removeClass("error")}}function isDoubleByte(str){for(var i=0,n=str.length;i<n;i++)if(str.charCodeAt(i)>255)return!0;return!1}})),hasError)hasError=!1;else if(validationRules){if(0==validationRules())return;var formData;SubmitFormAsAuto(formData=new FormData(this))}else{var formData;SubmitFormAsAuto(formData=new FormData(this))}}))}}(jQuery);